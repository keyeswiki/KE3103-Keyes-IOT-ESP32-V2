### ç¬¬21è¯¾ WiFi+ç½‘é¡µæ§åˆ¶LEDå’Œé£æ‰‡

#### 21.1 é¡¹ç›®ä»‹ç»

ç‰©è”ç½‘ï¼Œå°±æ˜¯å°†ç¡¬ä»¶è®¾å¤‡æ¥å…¥ç½‘ç»œã€‚æ¥å…¥ç½‘ç»œæœ€ä¾¿æ·çš„æ–¹æ³•å°±æ˜¯ä½¿ç”¨WiFiè¿æ¥äº†ã€‚ESP32 Plusä¸»æ§æ¿è‡ªå¸¦æœ‰WiFiæ¨¡å—ï¼Œæ‰€ä»¥å°†æˆ‘ä»¬çš„æ™ºèƒ½å®¶å±…æ¥å…¥ç½‘ç»œè¿˜æ˜¯æ¯”è¾ƒç®€å•çš„ã€‚

æˆ‘ä»¬å°†æ™ºèƒ½å®¶å±…è¿æ¥åˆ°å±€åŸŸç½‘ï¼Œä¹Ÿå°±æ˜¯ä½ å®¶é‡Œçš„WiFiæˆ–è€…ä½ æ‰‹æœºå¼€å¯çš„çƒ­ç‚¹ã€‚è¿æ¥æˆåŠŸåå°±ä¼šåˆ†é…ä¸€ä¸ªåœ°å€ï¼Œè¿™ä¸ªåœ°å€å°±å¯ä»¥ç”¨æ¥é€šè®¯äº†ï¼Œæˆ‘ä»¬å°†åˆ†é…åˆ°çš„åœ°å€åœ¨Shellçª—å£ä¸­æ‰“å°å‡ºæ¥ã€‚

æœ¬é¡¹ç›®å†…å®¹åŒ…æ‹¬ESP32çš„WiFié…ç½®ã€ç½‘é¡µè®¾ç½®ä»¥åŠå¦‚ä½•ç¼–å†™ä»£ç ç­‰å®ç°WiFiç½‘é¡µè¿œç¨‹ç›‘æ§å’Œæ§åˆ¶LEDå’Œé£æ‰‡ã€‚

#### 21.2 ç›¸å…³èµ„æ–™

Stationæ¨¡å¼ï¼šå½“ESP32é€‰æ‹©Stationæ¨¡å¼æ—¶ï¼Œå®ƒä½œä¸ºä¸€ä¸ªWiFiå®¢æˆ·ç«¯ã€‚å®ƒå¯ä»¥è¿æ¥è·¯ç”±å™¨ç½‘ç»œï¼Œé€šè¿‡WiFiè¿æ¥ä¸è·¯ç”±å™¨ä¸Šçš„å…¶ä»–è®¾å¤‡é€šä¿¡ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼ŒPCå’Œè·¯ç”±å™¨å·²ç»è¿æ¥ï¼ŒESP32å¦‚æœè¦ä¸PCé€šä¿¡ï¼Œéœ€è¦å°†PCå’Œè·¯ç”±å™¨è¿æ¥èµ·æ¥ã€‚

![](media/station.jpeg)

#### 21.3 å®éªŒç»„ä»¶

|![](media/esp32.png)|![](media/motor.png)|![](media/yellow-led2.png)|![](media/3p.png)|
|-|-|-|-|
|ESP32 Plusä¸»æ¿ *1|130ç”µæœºæ¨¡å— *1|é»„è‰²LEDæ¨¡å— *1|3Pçº¿ *1|
|![](media/lcd2.png)|![](media/fan2.png)|![](media/4p.png)|![](media/usb.png)|
|I2C LCD1602æ¨¡å— *1|é£æ‰‡å¶ *1|4Pçº¿ *2|USBçº¿ *1|

#### 21.4 æ¨¡å—æ¥çº¿å›¾

é»„è‰²LEDç¯ï¼ŒI2C 1602 LCDæ¨¡å—å’Œ130ç”µæœºæ¨¡å—çš„æ§åˆ¶å¼•è„šï¼š

|é»„è‰²LEDç¯ï¼ˆSå¼•è„šï¼‰|io12|
|-|-|
|130ç”µæœºæ¨¡å—ï¼ˆIN+å¼•è„šï¼‰|io19|
|130ç”µæœºæ¨¡å—ï¼ˆIN-å¼•è„šï¼‰|io18|
|I2C 1602 LCDæ¨¡å—ï¼ˆSDAå¼•è„šï¼‰|SDA|
|I2C 1602 LCDæ¨¡å—ï¼ˆSCLå¼•è„šï¼‰|SCL|

âš ï¸ **ç‰¹åˆ«æ³¨æ„ï¼šæ™ºèƒ½å®¶å±…å·²ç»ç»„è£…å¥½äº†ï¼Œè¿™é‡Œä¸éœ€è¦æŠŠé»„è‰²LEDç¯ï¼ŒI2C 1602 LCDæ¨¡å—å’Œ130ç”µæœºæ¨¡å—æ‹†ä¸‹æ¥åˆé‡æ–°ç»„è£…å’Œæ¥çº¿ï¼Œè¿™é‡Œå†æ¬¡æä¾›æ¥çº¿å›¾ï¼Œæ˜¯ä¸ºäº†æ–¹ä¾¿æ‚¨ç¼–å†™ä»£ç ï¼**

![](media/pjt14.png)

#### 21.5 WIFIç½‘é¡µæ§åˆ¶LEDå’Œé£æ‰‡çš„å®éªŒä»£ç 

æ‰“å¼€â€œThonnyâ€è½¯ä»¶ï¼Œç‚¹å‡»â€œæ­¤ç”µè„‘â€ â†’ â€œD:â€ â†’ â€œPythonèµ„æ–™â€ â†’ â€œPython_ä»£ç â€ã€‚å¹¶é¼ æ ‡å·¦é”®åŒå‡» â€œProject_21_wifi_control_led_fan.pyâ€ã€‚

âš ï¸ <span style="color: rgb(255, 76, 65);">**ç‰¹åˆ«æé†’ï¼š**</span> æ‰“å¼€ä»£ç æ–‡ä»¶åï¼Œéœ€è¦ä¿®æ”¹ESP32å¼€å‘æ¿éœ€è¦è¿æ¥çš„WiFiåç§°ä¸å¯†ç ï¼Œæ‚¨éœ€è¦åˆ†åˆ«å°† `ChinaNet-2.4G-0DF0` å’Œ `ChinaNet@233` æ›¿æ¢ä¸ºæ‚¨è‡ªå·±çš„ Wi-Fi åç§°å’Œ WiFi å¯†ç ã€‚WiFiåç§°å’ŒWiFiå¯†ç ä¿®æ”¹åæ‰èƒ½ä¸Šä¼ ä¸‹é¢çš„ç¤ºä¾‹ä»£ç ï¼Œå¦åˆ™ä½ çš„ESP32å¼€å‘æ¿å°†æ— æ³•è¿æ¥ç½‘ç»œã€‚

```python
SSID = "ChinaNet-2.4G-0DF0"  # æ›¿æ¢ä¸ºä½ çš„Wi-Fiåç§°
PASSWORD = "ChinaNet@233"  # æ›¿æ¢ä¸ºä½ çš„Wi-Fiå¯†ç 
```
âš ï¸ **æ³¨æ„ï¼š** è¯·ç¡®ä¿ä»£ç ä¸­çš„WiFiåç§°å’ŒWiFiå¯†ç ä¸è¿æ¥åˆ°æ‚¨çš„ç”µè„‘ã€æ‰‹æœº/å¹³æ¿ã€ESP32å¼€å‘æ¿å’Œè·¯ç”±å™¨çš„ç½‘ç»œç›¸åŒï¼Œå®ƒä»¬å¿…é¡»åœ¨åŒä¸€å±€åŸŸç½‘ï¼ˆWiFiï¼‰å†…ã€‚

âš ï¸ **æ³¨æ„ï¼š** WiFiå¿…é¡»æ˜¯2.4Ghzé¢‘ç‡çš„ï¼Œå¦åˆ™ESP32æ— æ³•è¿æ¥WiFiã€‚

```python
# ä½œè€… : www.keyes-robot.com

from machine import Pin, ADC, PWM, I2C
from time import sleep_ms, ticks_ms  
from i2c_lcd import I2cLcd 
import network
import socket
import time
import math

# WiFié…ç½®, ç›®çš„æ˜¯è¿æ¥Wi-Fi
SSID = "ChinaNet-2.4G-0DF0"  # æ›¿æ¢ä¸ºä½ çš„Wi-Fiåç§°
PASSWORD = "ChinaNet@233"  # æ›¿æ¢ä¸ºä½ çš„Wi-Fiå¯†ç 

# å¼•è„šå®šä¹‰
FAN_PIN1 = 19  # é£æ‰‡æ–¹å‘æ§åˆ¶å¼•è„š
FAN_PIN2 = 18  # é£æ‰‡PWMè°ƒé€Ÿå¼•è„š
LED_PIN = 12   # LED PWMè°ƒå…‰å¼•è„š

# åˆå§‹åŒ–LCD
DEFAULT_I2C_ADDR = 0x27
i2c = I2C(scl=Pin(22), sda=Pin(21), freq=400000) 
lcd = I2cLcd(i2c, DEFAULT_I2C_ADDR, 2, 16)

# é£æ‰‡æ§åˆ¶å­å‡½æ•°
class FanController:
    def __init__(self, dir_pin, pwm_pin):
        self.dir_pin = Pin(dir_pin, Pin.OUT)
        self.pwm = PWM(Pin(pwm_pin))
        self.pwm.freq(1000)  # 1kHz PWMé¢‘ç‡
        self.current_speed = 0
        self.is_running = False
        self.stop()
        print(f"é£æ‰‡æ§åˆ¶å™¨åˆå§‹åŒ–: DIR={dir_pin}, PWM={pwm_pin}")
    
    def set_speed(self, speed_percent):
        """è®¾ç½®é£æ‰‡é€Ÿåº¦ 0-100% - ç²¾ç¡®å¯¹åº”"""
        speed_percent = max(0, min(100, speed_percent))
        
        # ç²¾ç¡®è®¡ç®—PWMå ç©ºæ¯”
        duty = int(speed_percent * 10.23)  # 0-100% å¯¹åº” 0-1023
        
        if speed_percent == 0:
            self.dir_pin.value(0)
            self.pwm.duty(0)
            self.is_running = False
        else:
            self.dir_pin.value(0)  # è®¾ç½®æ–¹å‘
            self.pwm.duty(duty)
            self.is_running = True
        
        self.current_speed = speed_percent
        
        # ç²¾ç¡®çš„é€Ÿåº¦æè¿°
        speed_desc = self.get_speed_description(speed_percent)
        print(f"é£æ‰‡é€Ÿåº¦: {speed_percent}% - {speed_desc} (duty: {duty})")
        
        return speed_percent
    
    def get_speed_description(self, speed):
        """è·å–ç²¾ç¡®çš„é€Ÿåº¦æè¿°"""
        if speed == 0: return "åœæ­¢"
        elif speed <= 10: return "æä½é€Ÿ"
        elif speed <= 25: return "ä½é€Ÿ"
        elif speed <= 50: return "ä¸­ä½é€Ÿ" 
        elif speed <= 75: return "ä¸­é«˜é€Ÿ"
        elif speed <= 90: return "é«˜é€Ÿ"
        else: return "å…¨é€Ÿ"
    
    def stop(self):
        """åœæ­¢é£æ‰‡"""
        self.dir_pin.value(0)
        self.pwm.duty(0)
        self.current_speed = 0
        self.is_running = False
        print("é£æ‰‡åœæ­¢")
    
    def get_status(self):
        return {
            "running": self.is_running,
            "speed": self.current_speed,
            "speed_desc": self.get_speed_description(self.current_speed),
            "duty": self.pwm.duty()
        }
    
    def deinit(self):
        self.stop()
        self.pwm.deinit()

# é»„è‰²LEDæ§åˆ¶å­å‡½æ•°
class LEDController:
    def __init__(self, pin):
        self.pwm = PWM(Pin(pin))
        self.pwm.freq(1000)  # 1kHz PWMé¢‘ç‡
        self.current_brightness = 0
        self.is_on = False
        self.set_brightness(0)
        print(f"LEDæ§åˆ¶å™¨åˆå§‹åŒ–: PIN={pin}")
    
    def set_brightness(self, brightness_percent):
        """è®¾ç½®LEDäº®åº¦ 0-100% - ç²¾ç¡®å¯¹åº”"""
        brightness_percent = max(0, min(100, brightness_percent))
        
        # ç²¾ç¡®è®¡ç®—PWMå ç©ºæ¯”
        duty = int(brightness_percent * 10.23)  # 0-100% å¯¹åº” 0-1023
        self.pwm.duty(duty)
        self.current_brightness = brightness_percent
        self.is_on = brightness_percent > 0
        
        # ç²¾ç¡®çš„äº®åº¦æè¿°
        brightness_desc = self.get_brightness_description(brightness_percent)
        print(f"LEDäº®åº¦: {brightness_percent}% - {brightness_desc} (duty: {duty})")
        
        return brightness_percent
    
    def get_brightness_description(self, brightness):
        """è·å–ç²¾ç¡®çš„äº®åº¦æè¿°"""
        if brightness == 0: return "å…³é—­"
        elif brightness <= 10: return "å¾®äº®"
        elif brightness <= 25: return "æš—å…‰"
        elif brightness <= 50: return "æŸ”å…‰"
        elif brightness <= 75: return "äº®å…‰"
        elif brightness <= 90: return "å¼ºå…‰"
        else: return "æœ€äº®"
    
    def fade_in(self, duration_ms=2000):
        """LEDæ¸äº®æ•ˆæœ - ç²¾ç¡®çš„ç™¾åˆ†æ¯”å˜åŒ–"""
        print("LEDæ¸äº®...")
        steps = 100  # æ›´å¤šæ­¥æ•°å®ç°æ›´å¹³æ»‘çš„å˜åŒ–
        delay = duration_ms // steps
        
        for i in range(steps + 1):
            brightness = int((i / steps) * 100)
            self.set_brightness(brightness)
            time.sleep_ms(delay)
    
    def fade_out(self, duration_ms=2000):
        """LEDæ¸æš—æ•ˆæœ - ç²¾ç¡®çš„ç™¾åˆ†æ¯”å˜åŒ–"""
        print("LEDæ¸æš—...")
        steps = 100  # æ›´å¤šæ­¥æ•°å®ç°æ›´å¹³æ»‘çš„å˜åŒ–
        delay = duration_ms // steps
        
        for i in range(steps, -1, -1):
            brightness = int((i / steps) * 100)
            self.set_brightness(brightness)
            time.sleep_ms(delay)
    
    def breath_effect(self, cycles=3, duration_ms=3000):
        """å‘¼å¸ç¯æ•ˆæœ - ç²¾ç¡®çš„ç™¾åˆ†æ¯”å˜åŒ–"""
        print(f"LEDå‘¼å¸æ•ˆæœ {cycles} æ¬¡å¾ªç¯...")
        for cycle in range(cycles):
            print(f"å‘¼å¸å¾ªç¯ {cycle + 1}/{cycles}")
            self.fade_in(duration_ms // 2)
            self.fade_out(duration_ms // 2)
    
    def get_status(self):
        return {
            "on": self.is_on,
            "brightness": self.current_brightness,
            "brightness_desc": self.get_brightness_description(self.current_brightness),
            "duty": self.pwm.duty()
        }
    
    def deinit(self):
        self.set_brightness(0)
        self.pwm.deinit()

# åˆ›å»ºè®¾å¤‡å®ä¾‹
fan = FanController(FAN_PIN1, FAN_PIN2)
led = LEDController(LED_PIN)

# WiFiè¿æ¥å­å‡½æ•°
def connect_wifi():
    """è¿æ¥WiFi"""
    wlan = network.WLAN(network.STA_IF)
    wlan.active(True)
    
    if not wlan.isconnected():
        print(f"æ­£åœ¨è¿æ¥WiFi: {SSID}")
        wlan.connect(SSID, PASSWORD)
        
        timeout = 30
        while not wlan.isconnected() and timeout > 0:
            time.sleep(1)
            print('.', end='')
            timeout -= 1
    
    if wlan.isconnected():
        ip = wlan.ifconfig()[0]
        print(f"\nWiFiè¿æ¥æˆåŠŸ!")
        print(f"SSID: {SSID}")
        print(f"IPåœ°å€: {ip}")
        return ip
    else:
        print("\nWiFiè¿æ¥å¤±è´¥!")
        return None

# æ§åˆ¶é¡µé¢HTML
def create_html_page():
    """ç”Ÿæˆæ§åˆ¶é¡µé¢HTML - ä¼˜åŒ–æ•°å­—å¯¹åº”æ˜¾ç¤º"""
    html = """HTTP/1.1 200 OK\r\nContent-Type: text/html\r\n\r\n
<!DOCTYPE html>
<html>
<head>
    <title>ESP32 PWMç²¾ç¡®æ§åˆ¶</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 15px 30px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }
        
        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }
        
        .control-panels {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            padding: 30px;
        }
        
        @media (max-width: 768px) {
            .control-panels {
                grid-template-columns: 1fr;
            }
        }
        
        .panel {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .panel-title {
            font-size: 1.5em;
            color: #495057;
            margin-bottom: 20px;
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        .status-display {
            background: white;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 20px;
            text-align: center;
            border: 2px solid #e9ecef;
        }
        
        .status-value {
            font-size: 2em;
            font-weight: bold;
            color: #2196F3;
            margin: 10px 0;
        }
        
        .status-description {
            font-size: 1.1em;
            color: #28a745;
            font-weight: bold;
            margin: 5px 0;
        }
        
        .status-label {
            font-size: 0.9em;
            color: #6c757d;
        }
        
        .slider-control {
            margin: 25px 0;
        }
        
        .slider {
            width: 100%;
            height: 25px;
            margin: 20px 0;
            -webkit-appearance: none;
            border-radius: 12px;
            outline: none;
        }
        
        .fan-slider {
            background: linear-gradient(90deg, #4CAF50, #FFC107, #F44336);
        }
        
        .led-slider {
            background: linear-gradient(90deg, #000, #666, #FFF);
        }
        
        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 35px;
            height: 35px;
            background: #2196F3;
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 0 2px 10px rgba(33,150,243,0.4);
            border: 3px solid white;
        }
        
        .value-display {
            font-size: 3em;
            font-weight: bold;
            text-align: center;
            margin: 20px 0;
            font-family: 'Courier New', monospace;
        }
        
        .fan-value {
            color: #2196F3;
            text-shadow: 2px 2px 4px rgba(33,150,243,0.3);
        }
        
        .led-value {
            color: #FFC107;
            text-shadow: 2px 2px 4px rgba(255,193,7,0.3);
        }
        
        .preset-buttons {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 8px;
            margin: 20px 0;
        }
        
        .effect-buttons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin: 20px 0;
        }
        
        .btn {
            padding: 12px 8px;
            border: none;
            border-radius: 8px;
            font-size: 0.9em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.15);
        }
        
        .btn:active {
            transform: translateY(0);
        }
        
        .btn-fan { background: #2196F3; color: white; }
        .btn-led { background: #FFC107; color: black; }
        .btn-effect { background: #9C27B0; color: white; }
        .btn-stop { background: #dc3545; color: white; }
        
        .visualization {
            text-align: center;
            margin: 20px 0;
            padding: 20px;
            background: white;
            border-radius: 10px;
        }
        
        .fan-visual {
            font-size: 4em;
            color: #2196F3;
            transition: all 0.5s ease;
        }
        
        .led-visual {
            font-size: 4em;
            transition: all 0.3s ease;
        }
        
        .fan-spinning {
            animation: spin linear infinite;
        }
        
        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        
        .led-on {
            color: #FFC107;
            text-shadow: 0 0 20px #FFC107, 0 0 40px #FFC107;
        }
        
        .response-message {
            text-align: center;
            padding: 15px;
            margin: 20px 0;
            border-radius: 10px;
            font-weight: bold;
            display: none;
        }
        
        .success { background: #d4edda; color: #155724; }
        .error { background: #f8d7da; color: #721c24; }
        
        .speed-labels, .brightness-labels {
            display: flex;
            justify-content: space-between;
            margin-top: -5px;
            font-size: 0.8em;
            color: #6c757d;
            font-weight: bold;
        }
        
        .precision-info {
            text-align: center;
            font-size: 0.9em;
            color: #6c757d;
            margin-top: 10px;
            font-style: italic;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ¯ ç²¾ç¡®PWMæ§åˆ¶</h1>
            <p>é£é€Ÿ/äº®åº¦ä¸æ•°å­—ç²¾ç¡®å¯¹åº” | 0-100% çº¿æ€§æ§åˆ¶</p>
        </div>
        
        <div class="control-panels">
            <!-- é£æ‰‡æ§åˆ¶é¢æ¿ -->
            <div class="panel">
                <h2 class="panel-title">ğŸŒ¬ï¸ é£æ‰‡é€Ÿåº¦æ§åˆ¶</h2>
                
                <div class="visualization">
                    <div class="fan-visual" id="fan-visual">ğŸŒ€</div>
                </div>
                
                <div class="status-display">
                    <div class="status-label">å½“å‰é€Ÿåº¦</div>
                    <div class="status-value" id="fan-current-speed">0%</div>
                    <div class="status-description" id="fan-speed-desc">åœæ­¢</div>
                    <div class="status-label" id="fan-status-text">é£æ‰‡çŠ¶æ€</div>
                </div>
                
                <div class="slider-control">
                    <div class="value-display fan-value" id="fan-speed-display">0%</div>
                    <input type="range" min="0" max="100" value="0" class="slider fan-slider" id="fan-slider" step="1">
                    <div class="speed-labels">
                        <span>0%</span>
                        <span>25%</span>
                        <span>50%</span>
                        <span>75%</span>
                        <span>100%</span>
                    </div>
                    <div class="precision-info">ç²¾ç¡®å¯¹åº”: 0-100% çº¿æ€§æ§åˆ¶</div>
                </div>
                
                <div class="preset-buttons">
                    <button class="btn btn-fan" onclick="setFanSpeed(0)">0%<br>åœæ­¢</button>
                    <button class="btn btn-fan" onclick="setFanSpeed(25)">25%<br>ä½é€Ÿ</button>
                    <button class="btn btn-fan" onclick="setFanSpeed(50)">50%<br>ä¸­é€Ÿ</button>
                    <button class="btn btn-fan" onclick="setFanSpeed(75)">75%<br>é«˜é€Ÿ</button>
                    <button class="btn btn-fan" onclick="setFanSpeed(100)">100%<br>å…¨é€Ÿ</button>
                </div>
            </div>
            
            <!-- LEDæ§åˆ¶é¢æ¿ -->
            <div class="panel">
                <h2 class="panel-title">ğŸ’¡ LEDäº®åº¦æ§åˆ¶</h2>
                
                <div class="visualization">
                    <div class="led-visual" id="led-visual">ğŸ’¡</div>
                </div>
                
                <div class="status-display">
                    <div class="status-label">å½“å‰äº®åº¦</div>
                    <div class="status-value" id="led-current-brightness">0%</div>
                    <div class="status-description" id="led-brightness-desc">å…³é—­</div>
                    <div class="status-label" id="led-status-text">LEDçŠ¶æ€</div>
                </div>
                
                <div class="slider-control">
                    <div class="value-display led-value" id="led-brightness-display">0%</div>
                    <input type="range" min="0" max="100" value="0" class="slider led-slider" id="led-slider" step="1">
                    <div class="brightness-labels">
                        <span>0%</span>
                        <span>25%</span>
                        <span>50%</span>
                        <span>75%</span>
                        <span>100%</span>
                    </div>
                    <div class="precision-info">ç²¾ç¡®å¯¹åº”: 0-100% çº¿æ€§è°ƒå…‰</div>
                </div>
                
                <div class="preset-buttons">
                    <button class="btn btn-led" onclick="setLEDBrightness(0)">0%<br>å…³é—­</button>
                    <button class="btn btn-led" onclick="setLEDBrightness(25)">25%<br>æš—å…‰</button>
                    <button class="btn btn-led" onclick="setLEDBrightness(50)">50%<br>æŸ”å…‰</button>
                    <button class="btn btn-led" onclick="setLEDBrightness(75)">75%<br>äº®å…‰</button>
                    <button class="btn btn-led" onclick="setLEDBrightness(100)">100%<br>æœ€äº®</button>
                </div>
                
                <div class="effect-buttons">
                    <button class="btn btn-effect" onclick="ledFadeIn()">æ¸äº®æ•ˆæœ</button>
                    <button class="btn btn-effect" onclick="ledFadeOut()">æ¸æš—æ•ˆæœ</button>
                    <button class="btn btn-effect" onclick="ledBreath()">å‘¼å¸ç¯</button>
                    <button class="btn btn-stop" onclick="setLEDBrightness(0)">å…¨éƒ¨å…³é—­</button>
                </div>
            </div>
        </div>
        
        <div class="response-message" id="response-message"></div>
    </div>

    <script>
        // é£æ‰‡æ§åˆ¶
        const fanSlider = document.getElementById('fan-slider');
        const fanSpeedDisplay = document.getElementById('fan-speed-display');
        const fanCurrentSpeed = document.getElementById('fan-current-speed');
        const fanSpeedDesc = document.getElementById('fan-speed-desc');
        const fanStatusText = document.getElementById('fan-status-text');
        const fanVisual = document.getElementById('fan-visual');
        
        // LEDæ§åˆ¶
        const ledSlider = document.getElementById('led-slider');
        const ledBrightnessDisplay = document.getElementById('led-brightness-display');
        const ledCurrentBrightness = document.getElementById('led-current-brightness');
        const ledBrightnessDesc = document.getElementById('led-brightness-desc');
        const ledStatusText = document.getElementById('led-status-text');
        const ledVisual = document.getElementById('led-visual');
        
        const responseMessage = document.getElementById('response-message');
        
        // é£æ‰‡æ»‘å—äº‹ä»¶ - å®æ—¶æ˜¾ç¤ºç²¾ç¡®æ•°å€¼
        fanSlider.addEventListener('input', function() {
            const speed = parseInt(this.value);
            fanSpeedDisplay.textContent = speed + '%';
            updateFanVisual(speed);
            updateFanDescription(speed);
        });
        
        fanSlider.addEventListener('change', function() {
            const speed = parseInt(this.value);
            setFanSpeed(speed);
        });
        
        // LEDæ»‘å—äº‹ä»¶ - å®æ—¶æ˜¾ç¤ºç²¾ç¡®æ•°å€¼
        ledSlider.addEventListener('input', function() {
            const brightness = parseInt(this.value);
            ledBrightnessDisplay.textContent = brightness + '%';
            updateLEDVisual(brightness);
            updateLEDDescription(brightness);
        });
        
        ledSlider.addEventListener('change', function() {
            const brightness = parseInt(this.value);
            setLEDBrightness(brightness);
        });
        
        // é£æ‰‡æ§åˆ¶å‡½æ•° - ç²¾ç¡®æ•°å€¼ä¼ è¾“
        function setFanSpeed(speed) {
            fetch('/control?device=fan&value=' + speed)
                .then(response => response.text())
                .then(data => {
                    showMessage('é£æ‰‡: ' + data, 'success');
                    fanSlider.value = speed;
                    fanSpeedDisplay.textContent = speed + '%';
                    fanCurrentSpeed.textContent = speed + '%';
                    updateFanVisual(speed);
                    updateFanDescription(speed);
                    updateFanStatus(speed);
                })
                .catch(error => {
                    showMessage('é£æ‰‡æ§åˆ¶å¤±è´¥: ' + error, 'error');
                });
        }
        
        // LEDæ§åˆ¶å‡½æ•° - ç²¾ç¡®æ•°å€¼ä¼ è¾“
        function setLEDBrightness(brightness) {
            fetch('/control?device=led&value=' + brightness)
                .then(response => response.text())
                .then(data => {
                    showMessage('LED: ' + data, 'success');
                    ledSlider.value = brightness;
                    ledBrightnessDisplay.textContent = brightness + '%';
                    ledCurrentBrightness.textContent = brightness + '%';
                    updateLEDVisual(brightness);
                    updateLEDDescription(brightness);
                    updateLEDStatus(brightness);
                })
                .catch(error => {
                    showMessage('LEDæ§åˆ¶å¤±è´¥: ' + error, 'error');
                });
        }
        
        // LEDç‰¹æ•ˆå‡½æ•°
        function ledFadeIn() {
            fetch('/control?device=led&effect=fade_in')
                .then(response => response.text())
                .then(data => {
                    showMessage('LED: ' + data, 'success');
                    setLEDBrightness(100);
                })
                .catch(error => {
                    showMessage('ç‰¹æ•ˆæ‰§è¡Œå¤±è´¥: ' + error, 'error');
                });
        }
        
        function ledFadeOut() {
            fetch('/control?device=led&effect=fade_out')
                .then(response => response.text())
                .then(data => {
                    showMessage('LED: ' + data, 'success');
                    setLEDBrightness(0);
                })
                .catch(error => {
                    showMessage('ç‰¹æ•ˆæ‰§è¡Œå¤±è´¥: ' + error, 'error');
                });
        }
        
        function ledBreath() {
            fetch('/control?device=led&effect=breath')
                .then(response => response.text())
                .then(data => {
                    showMessage('LED: ' + data, 'success');
                })
                .catch(error => {
                    showMessage('å‘¼å¸ç¯æ‰§è¡Œå¤±è´¥: ' + error, 'error');
                });
        }
        
        // ç²¾ç¡®çš„æè¿°æ›´æ–°å‡½æ•°
        function updateFanDescription(speed) {
            const descriptions = {
                0: 'åœæ­¢',
                10: 'æä½é€Ÿ',
                25: 'ä½é€Ÿ',
                50: 'ä¸­ä½é€Ÿ',
                75: 'ä¸­é«˜é€Ÿ',
                90: 'é«˜é€Ÿ',
                100: 'å…¨é€Ÿ'
            };
            
            let desc = 'åœæ­¢';
            if (speed > 0 && speed <= 10) desc = 'æä½é€Ÿ';
            else if (speed <= 25) desc = 'ä½é€Ÿ';
            else if (speed <= 50) desc = 'ä¸­ä½é€Ÿ';
            else if (speed <= 75) desc = 'ä¸­é«˜é€Ÿ';
            else if (speed <= 90) desc = 'é«˜é€Ÿ';
            else if (speed > 90) desc = 'å…¨é€Ÿ';
            
            fanSpeedDesc.textContent = desc;
        }
        
        function updateLEDDescription(brightness) {
            const descriptions = {
                0: 'å…³é—­',
                10: 'å¾®äº®',
                25: 'æš—å…‰',
                50: 'æŸ”å…‰',
                75: 'äº®å…‰',
                90: 'å¼ºå…‰',
                100: 'æœ€äº®'
            };
            
            let desc = 'å…³é—­';
            if (brightness > 0 && brightness <= 10) desc = 'å¾®äº®';
            else if (brightness <= 25) desc = 'æš—å…‰';
            else if (brightness <= 50) desc = 'æŸ”å…‰';
            else if (brightness <= 75) desc = 'äº®å…‰';
            else if (brightness <= 90) desc = 'å¼ºå…‰';
            else if (brightness > 90) desc = 'æœ€äº®';
            
            ledBrightnessDesc.textContent = desc;
        }
        
        // å¯è§†åŒ–æ›´æ–°
        function updateFanVisual(speed) {
            if (speed > 0) {
                fanVisual.classList.add('fan-spinning');
                // é€Ÿåº¦è¶Šå¿«ï¼Œæ—‹è½¬è¶Šå¿«
                fanVisual.style.animationDuration = (2 - speed/50) + 's';
            } else {
                fanVisual.classList.remove('fan-spinning');
            }
        }
        
        function updateLEDVisual(brightness) {
            if (brightness > 0) {
                ledVisual.classList.add('led-on');
                ledVisual.style.opacity = brightness / 100;
                ledVisual.style.filter = `brightness(${100 + brightness}%) drop-shadow(0 0 ${brightness/3}px gold)`;
            } else {
                ledVisual.classList.remove('led-on');
                ledVisual.style.opacity = '0.3';
                ledVisual.style.filter = 'none';
            }
        }
        
        function updateFanStatus(speed) {
            if (speed > 0) {
                fanStatusText.textContent = 'è¿è¡Œä¸­';
                fanStatusText.style.color = '#28a745';
            } else {
                fanStatusText.textContent = 'å·²åœæ­¢';
                fanStatusText.style.color = '#dc3545';
            }
        }
        
        function updateLEDStatus(brightness) {
            if (brightness > 0) {
                ledStatusText.textContent = 'å¼€å¯ä¸­';
                ledStatusText.style.color = '#28a745';
            } else {
                ledStatusText.textContent = 'å·²å…³é—­';
                ledStatusText.style.color = '#dc3545';
            }
        }
        
        function showMessage(message, type) {
            responseMessage.textContent = message;
            responseMessage.className = 'response-message ' + type;
            responseMessage.style.display = 'block';
            
            setTimeout(() => {
                responseMessage.style.display = 'none';
            }, 3000);
        }
        
        // é¡µé¢åŠ è½½æ—¶è·å–å½“å‰çŠ¶æ€
        window.onload = function() {
            fetch('/status')
                .then(response => response.json())
                .then(data => {
                    // é£æ‰‡çŠ¶æ€
                    const fanSpeed = data.fan.speed;
                    fanSlider.value = fanSpeed;
                    fanSpeedDisplay.textContent = fanSpeed + '%';
                    fanCurrentSpeed.textContent = fanSpeed + '%';
                    updateFanVisual(fanSpeed);
                    updateFanDescription(fanSpeed);
                    updateFanStatus(fanSpeed);
                    
                    // LEDçŠ¶æ€
                    const ledBrightness = data.led.brightness;
                    ledSlider.value = ledBrightness;
                    ledBrightnessDisplay.textContent = ledBrightness + '%';
                    ledCurrentBrightness.textContent = ledBrightness + '%';
                    updateLEDVisual(ledBrightness);
                    updateLEDDescription(ledBrightness);
                    updateLEDStatus(ledBrightness);
                })
                .catch(error => {
                    console.log('è·å–çŠ¶æ€å¤±è´¥:', error);
                });
        };
    </script>
</body>
</html>
"""
    return html

def handle_control_request(device, value, effect=None):
    """å¤„ç†æ§åˆ¶è¯·æ±‚ - ç¡®ä¿æ•°å€¼ç²¾ç¡®å¯¹åº”"""
    try:
        if device == "fan":
            speed = int(value)
            actual_speed = fan.set_speed(speed)
            return f"é€Ÿåº¦è®¾ç½®ä¸º {actual_speed}% - {fan.get_speed_description(actual_speed)}"
        
        elif device == "led":
            if effect:
                if effect == "fade_in":
                    led.fade_in()
                    return "æ¸äº®æ•ˆæœå®Œæˆ - äº®åº¦ 100%"
                elif effect == "fade_out":
                    led.fade_out()
                    return "æ¸æš—æ•ˆæœå®Œæˆ - äº®åº¦ 0%"
                elif effect == "breath":
                    led.breath_effect()
                    return "å‘¼å¸ç¯æ•ˆæœå®Œæˆ"
            else:
                brightness = int(value)
                actual_brightness = led.set_brightness(brightness)
                return f"äº®åº¦è®¾ç½®ä¸º {actual_brightness}% - {led.get_brightness_description(actual_brightness)}"
        
        return "æœªçŸ¥è®¾å¤‡"
    
    except ValueError:
        return "æ— æ•ˆçš„å‚æ•°å€¼"
    except Exception as e:
        return f"æ§åˆ¶é”™è¯¯: {str(e)}"

def get_system_status():
    """è·å–ç³»ç»ŸçŠ¶æ€"""
    return {
        "fan": fan.get_status(),
        "led": led.get_status()
    }

def main():
    """ä¸»ç¨‹åº"""
    print("å¯åŠ¨ç²¾ç¡®PWMæ§åˆ¶ç³»ç»Ÿ...")
    print("é£æ‰‡æ§åˆ¶: 0-100% ç²¾ç¡®å¯¹åº”")
    print("LEDæ§åˆ¶: 0-100% ç²¾ç¡®è°ƒå…‰")
    
    # è¿æ¥WiFi
    ip = connect_wifi()
    
    # åœ¨LCDæ˜¾ç¤ºIP
    lcd.move_to(0, 0)
    lcd.putstr('IP:')
    lcd.move_to(0, 1)
    lcd.putstr(ip)
    
    if not ip:
        print("æ— æ³•å¯åŠ¨ï¼ŒWiFiè¿æ¥å¤±è´¥")
        return
    
    # åˆ›å»ºæœåŠ¡å™¨
    addr = socket.getaddrinfo('0.0.0.0', 80)[0][-1]
    server = socket.socket()
    server.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1)
    server.bind(addr)
    server.listen(5)
    
    print(f"æœåŠ¡å™¨å¯åŠ¨æˆåŠŸï¼Œè®¿é—®åœ°å€: http://{ip}")
    print("ç­‰å¾…å®¢æˆ·ç«¯è¿æ¥...")
    
    request_count = 0
    
    while True:
        try:
            client, addr = server.accept()
            request_count += 1
            
            print(f"\nè¯·æ±‚ #{request_count} æ¥è‡ª: {addr}")
            
            # æ¥æ”¶è¯·æ±‚
            request = client.recv(1024).decode('utf-8')
            if not request:
                client.close()
                continue
            
            # è§£æè¯·æ±‚
            request_line = request.split('\n')[0]
            print(f"è¯·æ±‚: {request_line}")
            
            # å¤„ç†ä¸åŒè¯·æ±‚
            if "GET / " in request or "GET /index" in request:
                # è¿”å›æ§åˆ¶é¡µé¢
                html = create_html_page()
                client.send(html)
                print("å‘é€æ§åˆ¶é¡µé¢")
                
            elif "GET /control" in request:
                # å¤„ç†æ§åˆ¶å‘½ä»¤
                if "?device=fan&value=" in request:
                    value = request.split('?device=fan&value=')[1].split(' ')[0]
                    response = handle_control_request("fan", value)
                    client.send(f"HTTP/1.1 200 OK\r\nContent-Type: text/plain\r\n\r\n{response}")
                    print(f"é£æ‰‡æ§åˆ¶: {response}")
                    
                elif "?device=led&value=" in request:
                    value = request.split('?device=led&value=')[1].split(' ')[0]
                    response = handle_control_request("led", value)
                    client.send(f"HTTP/1.1 200 OK\r\nContent-Type: text/plain\r\n\r\n{response}")
                    print(f"LEDæ§åˆ¶: {response}")
                    
                elif "?device=led&effect=" in request:
                    effect = request.split('?device=led&effect=')[1].split(' ')[0]
                    response = handle_control_request("led", None, effect)
                    client.send(f"HTTP/1.1 200 OK\r\nContent-Type: text/plain\r\n\r\n{response}")
                    print(f"LEDç‰¹æ•ˆ: {response}")
                    
                else:
                    client.send(b"HTTP/1.1 400 Bad Request\r\n\r\nInvalid request")
                    
            elif "GET /status" in request:
                # è¿”å›å½“å‰çŠ¶æ€
                status = get_system_status()
                status_json = '{"fan": {"speed": %d, "running": %s, "speed_desc": "%s"}, "led": {"brightness": %d, "on": %s, "brightness_desc": "%s"}}' % (
                    status["fan"]["speed"], 
                    str(status["fan"]["running"]).lower(),
                    status["fan"]["speed_desc"],
                    status["led"]["brightness"],
                    str(status["led"]["on"]).lower(),
                    status["led"]["brightness_desc"]
                )
                client.send(f"HTTP/1.1 200 OK\r\nContent-Type: application/json\r\n\r\n{status_json}")
                print("å‘é€ç³»ç»ŸçŠ¶æ€")
                
            else:
                # 404 Not Found
                client.send(b"HTTP/1.1 404 Not Found\r\n\r\nPage not found")
                
            client.close()
            
        except OSError as e:
            print(f"Socketé”™è¯¯: {e}")
        except Exception as e:
            print(f"å¤„ç†è¯·æ±‚æ—¶å‡ºé”™: {e}")
            try:
                client.close()
            except:
                pass
        
        time.sleep(0.1)

# ç²¾ç¡®æµ‹è¯•å‡½æ•°
def test_precision_control():
    """æµ‹è¯•ç²¾ç¡®æ§åˆ¶åŠŸèƒ½"""
    print("æµ‹è¯•ç²¾ç¡®æ§åˆ¶...")
    
    # æµ‹è¯•é£æ‰‡ç²¾ç¡®æ§åˆ¶
    print("æµ‹è¯•é£æ‰‡ç²¾ç¡®æ§åˆ¶:")
    test_speeds = [0, 10, 25, 50, 75, 90, 100, 90, 75, 50, 25, 10, 0]
    for speed in test_speeds:
        print(f"è®¾ç½®é£æ‰‡é€Ÿåº¦: {speed}%")
        fan.set_speed(speed)
        time.sleep(1)
     
    # æµ‹è¯•LEDç²¾ç¡®æ§åˆ¶
    print("æµ‹è¯•LEDç²¾ç¡®æ§åˆ¶:")
    test_brightness = [0, 10, 25, 50, 75, 90, 100, 90, 75, 50, 25, 10, 0]
    for brightness in test_brightness:
        print(f"è®¾ç½®LEDäº®åº¦: {brightness}%")
        led.set_brightness(brightness)
        time.sleep(0.5)
    
    # å›åˆ°åˆå§‹çŠ¶æ€
    fan.set_speed(0)
    led.set_brightness(0)
    
    print("ç²¾ç¡®æ§åˆ¶æµ‹è¯•å®Œæˆ")

if __name__ == "__main__":
    # å…ˆæµ‹è¯•ç²¾ç¡®æ§åˆ¶
    test_precision_control()
    time.sleep(2)
    
    # è¿è¡Œä¸»ç¨‹åº
    try:
        main()
    except KeyboardInterrupt:
        print("\nç¨‹åºè¢«ç”¨æˆ·ä¸­æ–­")
    except Exception as e:
        print(f"ç¨‹åºé”™è¯¯: {e}")
    finally:
        # æ¸…ç†èµ„æº
        fan.deinit()
        led.deinit()
        print("èµ„æºæ¸…ç†å®Œæˆ")
```

#### 21.6 å®éªŒç»“æœ

âš ï¸ <span style="color: rgb(255, 76, 65);">**æ³¨æ„ï¼šæ‰‹æœº/å¹³æ¿éœ€è¦å’Œæ™ºèƒ½å®¶å±…è¿æ¥åŒä¸€ä¸ªWiFiï¼Œæˆ–è€…æ‰‹æœº/å¹³æ¿æ‰“å¼€çƒ­ç‚¹ï¼Œæ™ºèƒ½å®¶å±…è¿æ¥æ‰‹æœº/å¹³æ¿çš„çƒ­ç‚¹ï¼Œä¸”ç¤ºä¾‹ä»£ç ä¸­çš„WiFiåç§°ä¸WiFiå¯†ç å’Œæ‰‹æœº/å¹³æ¿ã€æ™ºèƒ½å®¶å±…æ˜¯åŒä¸€ä¸ªWiFiåç§°ä¸å¯†ç ã€‚** </span>

âš ï¸ **<span style="color: rgb(255, 76, 65);">æ³¨æ„ï¼š</span>WiFiå¿…é¡»æ˜¯2.4Ghzé¢‘ç‡çš„ï¼Œå¦åˆ™ESP32æ— æ³•è¿æ¥WiFiï¼Œä¸æ”¯æŒè¿æ¥5GHzé¢‘æ®µçš„WiFiã€‚**ã€‚

âš ï¸ **<span style="color: rgb(255, 76, 65);">ç‰¹åˆ«æ³¨æ„ï¼š</span> æ‰‹æœºæˆ–å¹³æ¿ä¸€å®šè¦ä¸ESP32å¼€å‘æ¿è¿æ¥çš„æ˜¯åŒä¸€ä¸ªWiFiï¼Œå¦åˆ™å°†æ— æ³•è¿›å…¥æ§åˆ¶é¡µé¢ã€‚è¿˜æœ‰å°±æ˜¯ESP32å¼€å‘æ¿åœ¨ä½¿ç”¨WiFiåŠŸèƒ½æ—¶åŠŸè€—å¾ˆå¤§ï¼Œéœ€è¦å¤–æ¥DCç”µæº(ç”µæºç”µå‹å¿…é¡»å……è¶³ï¼Œæœ€å¥½ä½¿ç”¨æ–°ç”µæ± )æ‰èƒ½æ»¡è¶³å®ƒçš„å·¥ä½œç”µåŠ›éœ€æ±‚ï¼Œå¦‚æœè¾¾ä¸åˆ°å®ƒçš„å·¥ä½œç”µåŠ›éœ€æ±‚ESP32æ¿å°†ä¼šä¸€ç›´å¤ä½å¯¼è‡´ä»£ç æ— æ³•æ­£å¸¸è¿è¡Œã€‚**

æŒ‰ç…§æ¥çº¿å›¾æ¥å¥½çº¿ï¼Œå°† ESP32 ä¸»æ§æ¿é€šè¿‡Micro USBæ•°æ®çº¿ä¸è®¡ç®—æœºç›¸è¿ä¾›ç”µï¼Œå¤–æ¥ç”µæºä¾›ç”µï¼Œç„¶åå•å‡»æŒ‰é’®![](media/1305.png)ï¼Œç¤ºä¾‹ä»£ç å¼€å§‹æ‰§è¡Œã€‚


![](media/AB1.png)

ç¤ºä¾‹ä»£ç å¼€å§‹æ‰§è¡Œä¹‹åï¼Œä½ ä¼šçœ‹åˆ°çš„ç°è±¡æ˜¯ï¼šShellçª—å£ä¸­ä¼šæ‰“å°é£æ‰‡å’Œé»„è‰²LEDçš„å¼•è„šä¿¡æ¯ï¼Œæ¥ç€é£æ‰‡å¼€å¯ï¼Œå¹¶ä¸”é£é€Ÿå…ˆé€æ¸å¢å¤§åé€æ¸å‡å°‘ï¼Œç›´åˆ°é£æ‰‡åœæ­¢ï¼ŒåŒæ—¶Shellçª—å£ä¸­ä¼šæ‰“å°é£æ‰‡è½¬åŠ¨çš„é£é€Ÿå˜åŒ–ç›¸å…³ä¿¡æ¯ï¼›é»„è‰²LEDé€æ¸å˜äº®åé€æ¸å˜æš—ï¼ŒåŒæ—¶Shellçª—å£ä¸­æ‰“å°LEDäº®æš—æ¸å˜çš„ç›¸å…³ä¿¡æ¯ã€‚å¦‚æœæˆåŠŸè¿æ¥ä¸ŠWiFiï¼ŒShellçª—å£ä¸­è¿˜ä¼šæ‰“å°WiFiåç§°å’Œåˆ†é…åˆ°çš„IPåœ°å€ï¼ˆ<span style="color: rgb(255, 76, 65);">å‡å¦‚Shellçª—å£ä¸­æ²¡æœ‰æ‰“å°å‡ºåˆ†é…åˆ°çš„IPåœ°å€ï¼Œå¯ä»¥æŒ‰ä¸‹ESP32ä¸»æ§æ¿ä¸Šçš„å¤ä½é”®é‡å¯ï¼Œé‡æ–°è¿æ¥WiFi</span>ï¼‰ï¼ŒåŒæ—¶LCD1602æ˜¾ç¤ºå¯¹åº”çš„IPåœ°å€ã€‚ä¸åŒçš„ç½‘ç»œï¼ˆWiFiï¼‰ï¼ŒIPåœ°å€æ˜¯ä¸ä¸€æ ·ã€‚

![](media/ASDCsx12.png)

![](media/CDFxz11.jpg)

ç„¶åï¼Œæ‚¨å¯ä»¥åœ¨æ‰‹æœºç«¯/å¹³æ¿ç«¯çš„æµè§ˆå™¨ä¸­è¾“å…¥Shellçª—å£æ‰“å°çš„ ESP32 IPåœ°å€ï¼ˆæˆ–LCD1602æ˜¾ç¤ºçš„ ESP32 IPåœ°å€ï¼‰ï¼Œä½¿ç”¨æµè§ˆå™¨æ‰“å¼€ESP32çš„IPåœ°å€ï¼Œå¹¶è®¿é—®ç½‘é¡µã€‚åœ¨æœ¬ä¾‹ä¸­ï¼Œæ‚¨å¯ä»¥åœ¨æµè§ˆå™¨ä¸­è¾“å…¥ä½ è‡ªå·±çš„**ESP32 IPåœ°å€**(**è¿™é‡Œæ˜¯ä»¥192.168.31.131ä¸ºä¾‹ï¼Œè€Œä½ éœ€è¦å°†IPåœ°å€ï¼š192.168.31.131 ä¿®æ”¹æˆä½ è‡ªå·±çš„ ESP32 IPåœ°å€**)ï¼Œåœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ESP32çš„IPåœ°å€æ¥æŸ¥çœ‹é£æ‰‡æ¨¡å—å’Œé»„è‰²LEDæ¨¡å—çš„æ§åˆ¶ç½‘é¡µã€‚

![](media/WEDazx1.png)

è¿›å…¥å¯¹åº”WiFiç½‘é¡µä¹‹åï¼Œå¯ä»¥çœ‹åˆ°ç½‘é¡µä¸­æ˜¾ç¤ºé£æ‰‡å’ŒLEDç­‰ç›¸å…³è®¾å¤‡ã€‚åŒæ—¶ï¼ŒShellçª—å£ä¸­ä¼šæ‰“å° â€œå‘é€æ§åˆ¶é¡µé¢â€ã€â€œå‘é€ç³»ç»ŸçŠ¶æ€â€ ç­‰ç›¸å…³ä¿¡æ¯ã€‚

![](media/QQ32.png)

æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æ‰‹æœº/å¹³æ¿ç­‰è®¾å¤‡çš„WiFiç½‘é¡µæ¥æ“ä½œé»„è‰²LEDå’Œé£æ‰‡ã€‚

âš ï¸ **<span style="color: rgb(255, 76, 65);">ç‰¹åˆ«æ³¨æ„ï¼š</span> ä¸€å®šè¦å¤–æ¥ç”µæºï¼Œå¤–æ¥DCç”µæº(ç”µæºç”µå‹å¿…é¡»å……è¶³ï¼Œæœ€å¥½ä½¿ç”¨æ–°ç”µæ± )æ‰èƒ½æ»¡è¶³ESP32ä¸»æ§æ¿å’Œé£æ‰‡æ¨¡å—çš„å·¥ä½œç”µåŠ›éœ€æ±‚ï¼Œå¦‚æœè¾¾ä¸åˆ°å®ƒçš„å·¥ä½œç”µåŠ›éœ€æ±‚ï¼ŒESP32ä¸»æ§æ¿å°†ä¼šä¸€ç›´å¤ä½å¯¼è‡´ä»£ç æ— æ³•æ­£å¸¸è¿è¡Œã€‚**

![](media/ACVH111.jpg)

å•å‡»![](media/1311.png)â€œåœæ­¢/å¯åŠ¨åç«¯è¿›ç¨‹â€é€€å‡ºç¨‹åºã€‚